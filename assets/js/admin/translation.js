
jQuery(document).ready(function($){function wplngResizeTextArea($element){$element.height(0);$element.height($element[0].scrollHeight);}
var $wplngTextArea=$("#wplng_meta_box_translation textarea");$wplngTextArea.off("keyup.textarea").on("keyup.textarea",function(){wplngResizeTextArea($(this));});$(window).resize(function(){$wplngTextArea.each(function(){wplngResizeTextArea($(this));});});$wplngTextArea.each(function(){wplngResizeTextArea($(this));});$(".wplng-generate-spin").hide();$(".wplng-generate").on("click",function(){if("disabled"==$(this).attr("disabled")){return;}
var source=$("#wplng-original-language").attr("wplng-lang");var target=$(this).attr("wplng-lang");var text=$("#wplng-source").html();if(undefined==source||undefined==target||undefined==text){return;}
var container="#wplng-translation-"+target;$(container+" .wplng-generate").attr("disabled",true);$(container+" .wplng-generate-spin").show();$.ajax({url:adminAjax.ajaxurl,method:'POST',data:{action:'wplng_ajax_translation',text:text,language_source:source,language_target:target},success:function(data){if(data.success){var textarea="#wplng_translation_"+target;$(textarea).val(data.data);wplngResizeTextArea($(textarea));$(container+" .wplng-generate-spin").hide();setTimeout(function(){$(container+" .wplng-generate").attr("disabled",false);},8000);}else{console.log("wpLingua - Error:");console.log(data);$(container+" .wplng-generate-spin").removeClass("dashicons-update").removeClass("wplng-spin").addClass("dashicons-no");}},error:function(data){console.log("wpLingua - Error:");console.log(data);$(container+" .wplng-generate-spin").removeClass("dashicons-update").removeClass("wplng-spin").addClass("dashicons-no");}});});});