{"version":3,"file":"admin/option-page-dictionary.js","sources":["admin/option-page-dictionary.js"],"sourcesContent":["jQuery(document).ready(function ($) {\r\n\r\n    let wplngDictionaryEntries = JSON.parse($(\"#wplng_dictionary_entries\").val());\r\n\r\n    /**\r\n     * Add new dictionary entry button\r\n     */\r\n\r\n    $(\"#wplng-new-rule-button\").click(function () {\r\n        $(\"#wplng-section-entries-all\").hide();\r\n        $(\"#wplng-section-entry-new\").show();\r\n        wplngResizeTextArea($(\"#wplng-dictionary-entry-new .wplng-adaptive-textarea\"));\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n\r\n    /**\r\n     * Add new dictionary entry\r\n     */\r\n\r\n    $(\"#wplng-new-never-translate\").change(function () {\r\n        if (this.checked) {\r\n            $(\"#wplng-new-rules\").slideUp(\"fast\");\r\n        } else {\r\n            $(\"#wplng-new-rules\").slideDown(\"fast\");\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Click button save new dictionary entry\r\n     */\r\n\r\n    $(\"#wplng-new-add-button\").click(function () {\r\n\r\n        let source = $(\"#wplng-new-source\").val();\r\n        let rules = {};\r\n\r\n        if (undefined == source || '' == source.trim()) {\r\n            return;\r\n        }\r\n\r\n        if (!$(\"#wplng-edit-never-translate\").prop(\"checked\")) {\r\n            $(\".wplng-new-rule\").each(function () {\r\n\r\n                let languageId = $(this).attr(\"wplng-rule\");\r\n                let translate = $(\"textarea\", this).val();\r\n\r\n                if (undefined != translate && '' != translate.trim()) {\r\n                    rules[languageId] = translate.trim();\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        if (0 == Object.keys(rules).length) {\r\n            wplngDictionaryEntries.push({\r\n                \"source\": source\r\n            });\r\n        } else {\r\n            wplngDictionaryEntries.push({\r\n                \"source\": source,\r\n                \"rules\": rules\r\n            });\r\n        }\r\n\r\n        $(\"#wplng_dictionary_entries\").val(JSON.stringify(wplngDictionaryEntries));\r\n\r\n        $(\"#submit\").click();\r\n    });\r\n\r\n\r\n    /**\r\n     * Cancel new entry\r\n     */\r\n\r\n    $(\"#wplng-new-cancel-button\").click(function () {\r\n        $(\"#wplng-section-entries-all\").show();\r\n        $(\"#wplng-section-entry-new\").hide();\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n\r\n    /**\r\n     * Remove link\r\n     */\r\n\r\n    $(\".wplng-rule-link-remove\").click(function () {\r\n\r\n        let ruleNumber = $(this).attr(\"wplng-rule\");\r\n        let newDictionaryEntries = [];\r\n        let counter = 0;\r\n\r\n        wplngDictionaryEntries.forEach(element => {\r\n            if (counter != ruleNumber) {\r\n                newDictionaryEntries.push(element);\r\n            }\r\n            counter++;\r\n        });\r\n\r\n        $(\"#wplng_dictionary_entries\").val(JSON.stringify(newDictionaryEntries));\r\n\r\n        $(\"#submit\").click();\r\n\r\n    });\r\n\r\n\r\n    /**\r\n     * Edit link on dictionary entry\r\n     */\r\n\r\n    $(\".wplng-rule-link-edit\").click(function () {\r\n\r\n        let ruleNumber = $(this).attr(\"wplng-rule\");\r\n        let editedDictionaryEntry = wplngDictionaryEntries[ruleNumber];\r\n\r\n        $(\"#wplng-section-entries-all\").hide();\r\n        $(\"#wplng-section-entry-edit\").show();\r\n        wplngResizeTextArea($(\"#wplng-dictionary-entry-edit .wplng-adaptive-textarea\"));\r\n\r\n        $(\"#wplng-edit-source\").val(editedDictionaryEntry.source);\r\n        $(\"#wplng-edit-save-button\").prop(\"wplng-rule\", ruleNumber);\r\n\r\n        if (editedDictionaryEntry.rules == undefined) {\r\n            $(\"#wplng-edit-never-translate\").prop(\"checked\", true);\r\n            $(\"#wplng-edit-rules\").hide();\r\n        } else {\r\n            $(\"#wplng-edit-never-translate\").prop(\"checked\", false);\r\n            $(\"#wplng-edit-rules\").show();\r\n            $(\"#wplng-edit-rules textarea\").val(\"\");\r\n            $.each(editedDictionaryEntry.rules, function (key, value) {\r\n                let textareaSelector = \"#wplng-edit-always-translate-\" + key;\r\n                $(textareaSelector).val(value);\r\n            });\r\n        }\r\n\r\n        window.scrollTo(0, 0);\r\n\r\n    });\r\n\r\n\r\n    /**\r\n     * Never translate checkbox on new dictionary entry\r\n     */\r\n\r\n    $(\"#wplng-edit-never-translate\").change(function () {\r\n        if (this.checked) {\r\n            $(\"#wplng-edit-rules\").slideUp(\"fast\");\r\n        } else {\r\n            $(\"#wplng-edit-rules\").slideDown(\"fast\");\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Save edited dictionary entry\r\n     */\r\n\r\n    $(\"#wplng-edit-save-button\").click(function () {\r\n\r\n        let source = $(\"#wplng-edit-source\").val();\r\n        let rules = {};\r\n        let ruleNumber = $(this).prop(\"wplng-rule\");\r\n\r\n        if (undefined == source || '' == source.trim()) {\r\n            return;\r\n        }\r\n\r\n        if (!$(\"#wplng-edit-never-translate\").prop(\"checked\")) {\r\n            $(\".wplng-edit-rule\").each(function () {\r\n\r\n                let languageId = $(this).attr(\"wplng-rule\");\r\n                let translate = $(\"textarea\", this).val();\r\n\r\n                if (undefined != translate && '' != translate.trim()) {\r\n                    rules[languageId] = translate.trim();\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        wplngDictionaryEntries.splice(ruleNumber, 1);\r\n\r\n        if (0 == Object.keys(rules).length) {\r\n            wplngDictionaryEntries.push({\r\n                \"source\": source\r\n            });\r\n        } else {\r\n            wplngDictionaryEntries.push({\r\n                \"source\": source,\r\n                \"rules\": rules\r\n            });\r\n        }\r\n\r\n        $(\"#wplng_dictionary_entries\").val(JSON.stringify(wplngDictionaryEntries));\r\n\r\n        $(\"#submit\").click();\r\n    });\r\n\r\n\r\n    /**\r\n     * Cancel edit entry\r\n     */\r\n\r\n    $(\"#wplng-edit-cancel-button\").click(function () {\r\n        $(\"#wplng-section-entries-all\").show();\r\n        $(\"#wplng-section-entry-edit\").hide();\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n\r\n    /**\r\n     * Resize text area\r\n     */\r\n\r\n    function wplngResizeTextArea($element) {\r\n        $element.height(0);\r\n        $element.height($element[0].scrollHeight);\r\n    }\r\n\r\n    let $wplngTextArea = $(\"textarea.wplng-adaptive-textarea\");\r\n\r\n    $wplngTextArea.off(\"keyup.textarea\").on(\"keyup.textarea\", function () {\r\n        wplngResizeTextArea($(this));\r\n    });\r\n\r\n    $(window).resize(function () {\r\n        $wplngTextArea.each(function () {\r\n            wplngResizeTextArea($(this));\r\n        });\r\n    });\r\n\r\n    $wplngTextArea.each(function () {\r\n        wplngResizeTextArea($(this));\r\n    });\r\n\r\n}); // End jQuery loaded event\r\n"],"names":["jQuery","document","ready","$","let","wplngDictionaryEntries","JSON","parse","val","wplngResizeTextArea","$element","height","scrollHeight","click","hide","show","window","scrollTo","change","this","checked","slideUp","slideDown","source","rules","undefined","trim","prop","each","languageId","attr","translate","Object","keys","length","push","stringify","ruleNumber","newDictionaryEntries","counter","forEach","element","editedDictionaryEntry","key","value","splice","$wplngTextArea","off","on","resize"],"mappings":"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"}